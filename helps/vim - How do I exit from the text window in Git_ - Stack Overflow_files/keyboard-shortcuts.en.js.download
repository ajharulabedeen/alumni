StackExchange.keyboardShortcuts=function(){function e(e,t,n){var r=$.cache[document[jQuery.expando]].events[e];if(r){for(var i,o=0;o<r.length;o++){var a=r[o];if(n==a.selector&&t.test(a.handler.toString())){i=a.handler;break}}i&&(n?$(document).off(e,n,i):$(document).off(e,i))}}function t(){e("keydown",/keyHappening = true/),e("keyup",/didn't generate a keypress event/),e("keypress",/resetModeIfNotApplicable/),e("click",/resetMode\(\);\s+reset\(\);/),e("click",/init\(state\.getSelectable\(\)\)/,".js-new-post-activity"),e("ajaxComplete",/ajaxNeedsReinit[\s\S]*ajaxNeedsNoReset/)}function n(){function e(){return"fixed"===v.css("position")}function t(e,t){var n="se-keyboard-shortcuts.settings.";if(arguments.length<2)try{return t=localStorage.getItem(n+e),"true"===t?!0:"false"===t?!1:t}catch(r){return}else try{return localStorage.setItem(n+e,t)}catch(r){return}}function n(e){var t=$(".keyboard-console pre");return e.length?(t.length||(t=$("<div class='keyboard-console'><pre /></div>").appendTo("body").find("pre")),e=e.replace(/^!(.*)$/gm,"<b>$1</b>"),t.html(e).parent().show(),void 0):(t.parent().hide(),void 0)}function r(){this.order=[],this.actions={}}function i(e){return e=$.trim(e.replace(/[\r\n ]+/g," ")),e.length>40&&(e=e.substr(0,37)+"..."),e}function o(e){return 10>e?""+e:10==e?"0":String.fromCharCode(54+e)}function a(e,t,n,i,a){var s=new r;t=t||"clickOrLink";var c=1;return $(e).find(n||"> a").each(function(e,n){var r=a?$(n).attr("title"):$(n).text().replace(/^\s*-?[\d*]*\s*|\s+-?[\d*]*\s*$/g,""),u=$(n).attr("data-shortcut")||i&&o(c++)||y[r];if(!u){if(u=r.replace(/[^a-z]/gi,"").toUpperCase(),!u){var l=/[\?&](answertab|tab|sort)=(\w+)/i.exec($(n).attr("href"))||[];u=(l[2]||"").toUpperCase()}for(;u.length&&s.actions[u.charAt(0)];)u=u.substr(1);if(!u.length)return StackExchange.debug.log("no suitable shortcut for sort order "+r),void 0}var d={};d[t]=n,s.add(u.charAt(0),r,d)}),s}function s(e,t,n){return{"name":e,"isApplicable":function(){return v.find(t).length},"getShortcuts":function(){var e,o,a,s,c,u=v.find(t+" "+n),l=Math.min(u.length,10);for(c=new r,e=0;l>e;e++){s=u.eq(e);var d=s.closest("li");o=i(d.find(".item-summary").text()),o.length||(o=i(d.find(".item-location").text())),o.length||(o=i(d.text())),a=s.attr("href");var p=9>e?""+(e+1):"0";c.add(p,o,{"url":a})}return c}}}function c(t,n,r,i){return{"onlyIf":".js-top-bar "+t,"func":function(){v.find(t).click(),e()||d(0)},"initiatesMode":s(n,r,i)}}function u(){return w&&w.isApplicable()?w:void 0}function l(e){function i(){var e="disableAutoHelp",n=t(e);t(e,!n),n=t(e),P.actions.H.name=n?"enable auto help":"disable auto help",F=StackExchange.helpers.DelayedReaction(E,n?2e3:5e3,{"sliding":!0})}function o(){var e=new r;P.add("G","go to",{"next":e}),O&&(P.add("U",O.firstText,{"func":function(){v(0,!1,!1,!1,!0)}}),P.add("J",O.nextText,{"func":function(){v(1,!1)}}),P.add("K",O.prevText,{"func":function(){v(-1,!1)}}),I.isQuestionPage||P.add("Enter",O.gotoText,{"clickOrLink":".keyboard-selected a"+(O.hrefOnly?"[href]":"")})),e.add("H","home page",{"url":"/"}),e.add("Q","questions",{"url":"/questions"}),e.add("T","tags",{"url":"/tags"}),e.add("U","users",{"url":"/users"}),e.add("B","badges",{"url":"/badges"}),e.add("N","unanswered",{"url":"/unanswered"}),e.add("A","ask question",{"link":"#nav-askquestion[href]"}),e.add("P","my profile",{"link":".profile-link,.profile-me"}),I.mainSiteLink?e.add("M","main site",{"url":I.mainSiteLink}):I.metaSiteLink&&e.add("M","meta site",{"url":I.metaSiteLink}),e.add("C","chat",{"link":"#footer-menu a:contains('chat')"});var n=new r;n.add("R","review",{"link":".topbar-menu-links a[href='/review/']"}),n.add("F","flags",{"link":".topbar .mod-only .icon-flag"}),e.add("S","special pages",{"next":n}),e.add("E","help center",{"url":"/help"});var o=new r;if(I.isQuestionPage)f();else if(I.isProfilePage){o.add("T","tab",{"next":a("#tabs")}),o.add("U","user",{"next":a(".reloaded > .tabs")}),o.add("S","settings",{"next":a("#profile-side #side-menu li")}),I.isQuestionListing&&I.isAnswerListing&&(o.add("Q","questions",{"func":function(){l("questionListing")}}),o.add("A","answers",{"func":function(){l("answerListing")}}));var u=new r;u.add("M","moderation tools",{"click":".js-mod-menu-button","initiatesMode":k}),u.add("A","annotations",{"link":".mod-flag-indicator[href^='/users/history']"}),u.add("F","flagged posts",{"link":".mod-flag-indicator[href^='/users/flagged-posts']"}),P.add("M","moderate",{"next":u})}else(I.isQuestionListing||I.isTagInfoPage)&&(P.add("L","switch to question list",{"next":a(".js-uql-navigation",null,'a[data-shortcut]:not([data-shortcut=""])')}),P.add("O","order questions by",{"next":a("#tabs, .js-filter-btn, .js-sort-popover",null," a[data-shortcut]")}));P.add("N","in-page navigation",{"next":o}),e.add("F","faq",{"url":"/faq"}),P.add("I","inbox",c(".js-inbox-button","Inbox item...",".inbox-dialog","li.inbox-item a")),P.add("R","recent achievements",c(".js-achievements-button","Achievement...",".achievements-dialog","ul.js-items li a")),P.add("Q","mod messages",c(".js-mod-inbox-button","Mod message...",".modInbox-dialog","li.inbox-item a")),P.add("F","show freshly updated data",{"click":".js-new-post-activity, .js-new-answer-activity","reinit":!0}),P.add("S","search",{"func":function(){var e=$(".js-search-field");e.is(":visible")?e.focus():$(".js-searchbar-trigger").click()}});var d=s();P.add("P","page",{"next":d}),P.add("?","help",{"func":function(){if($(".keyboard-console").is(":visible"))return E(),void 0;var e="Keyboard shortcuts:";m&&(e=m+"\n"+e),b(e)},"noReset":!0,"unimportant":!0}),P.add("H",t("disableAutoHelp")?"enable auto help":"disable auto help",{"func":i,"unimportant":!0})}function s(){var e;I.isQuestionPage?e=".pager-answers":(e="",I.isQuestionListing&&I.isAnswerListing&&(e={"question":"#questions-table ","answer":"#answers-table "}[O.name]||""),e+=".pager:first");var t=new r;return t.add("F","first page",{"clickOrLink":e+" a[title='go to page 1']"}),t.add("P","previous page",{"clickOrLink":e+" a[rel='prev']"}),t.add("N","next page",{"clickOrLink":e+" a[rel='next']"}),t.add("L","last page",{"clickOrLink":e+" .current ~ a:not([rel='next']):last"}),t}function l(e){var t=M[e];t!==O&&(O=t,t.elements=$(t.selector),$(".keyboard-selected").removeClass("keyboard-selected"),P.actions.P.next=s(),d(t.elements.first().offset().top-100))}function p(){var e=$(".keyboard-selected");return e.is(".question")?parseInt(location.pathname.replace(/^\/questions\/(\d+)\/.*$/,"$1")):e.is(".answer")?parseInt(e.attr("id").replace("answer-","")):null}function f(){var e=new r;P.add("V","vote",{"next":e,"autoSelect":!0}),e.add("U","up",{"click":".keyboard-selected .js-vote-up-btn"}),e.add("D","down",{"click":".keyboard-selected .js-vote-down-btn"}),P.add("A","answer",{"func":function(){var e=$("#wmd-input:visible");e.length?e.focus():($("#show-editor-button input").click(),setTimeout(function(){$("#wmd-input:visible").focus()},0))},"onlyIf":"#wmd-input"}),$(".edit-post").length?P.add("E","edit",{"click":".keyboard-selected .edit-post","autoSelect":!0}):P.add("E","edit",{"link":".keyboard-selected .post-menu a[href$='/edit']","autoSelect":!0}),$("#edit-tags").length?P.add("T","retag",{"click":"#edit-tags"}):P.add("T","retag",{"link":".question .post-menu a[href$='?tagsonly=true']"}),P.add("C","add/show comments",{"click":".keyboard-selected .comments-link","autoSelect":!0}),P.add("L","link",{"click":".keyboard-selected .post-menu .js-share-link","autoSelect":!0,"useDOMClick":!0});var t=new r;P.add("M","moderate",{"next":t,"autoSelect":!0}),t.add("F","flag",{"click":".keyboard-selected a[id^='flag-post-'], .keyboard-selected .flag-post-link","initiatesMode":k}),t.add("C","close",{"click":".keyboard-selected a[id^='close-question-'], .keyboard-selected .close-question-link","initiatesMode":k}),t.add("D","delete",{"click":".keyboard-selected a[id^='delete-post-']"}),t.add("E","suggested edit",{"click":".keyboard-selected a[id^='edit-pending-']"}),t.add("M","moderation tools",{"click":".keyboard-selected .js-mod-menu-button","initiatesMode":k}),t.add("I","post issues",{"getNext":function(){return a(".keyboard-selected",null,".js-post-issue",!1,!0)},"onlyIf":".keyboard-selected .js-post-issue"}),P.actions.G.next.add("O","post owner's profile",{"link":".keyboard-selected .post-signature:last .user-details a[href^='/users/']"}),P.actions.G.next.add("R","post revisions",{"func":function(e){T("/posts/"+p()+"/revisions",e.shiftKey)},"onlyIf":".keyboard-selected"}),P.add("O","order answers by",{"next":a("#tabs")})}function h(e){var t,n;if(e.hasOwnProperty("onlyIf")?t=e.onlyIf:(e.autoSelect&&!$(".keyboard-selected").length&&(v(1,!1,!0,!0),setTimeout(function(){$(".keyboard-selected").removeClass("keyboard-selected")},0)),t=e.clickOrLink?function(){return $(e.clickOrLink).length}:e.link||e.click),t&&(n=t,"string"==typeof t?t=function(){return $(n).length}:"function"!=typeof t&&(t=function(){return n})),t&&!t())return!1;var r;if(e.getNext?r=e.getNext():e.next&&(r=e.next),r){for(var i=0;i<r.order.length;i++)if(h(r.actions[r.order[i]]))return!0;return!1}return!0}function v(e,t,n,r,i){if(O&&(O.elements||(O.elements=$(O.selector)),O.elements.length)){var o,a,s,c,u,l,p,f,h,g,m,v=$(window),b=v.scrollTop(),y=v.height(),w=b+y,k=$(".keyboard-selected"),x=t;if(!(k.length&&n||((t||!k.length&&!i)&&(o=O.elements.filter(function(){var e=$(this),t=e.offset().top,n=e.height(),r=t+n,i=Math.max(0,Math.min(r,w)-Math.max(t,b));return i>=50?!0:i/n>=.5?!0:(b>t?l=e:r>w&&!p&&(p=e),!1)})),a=t?o:O.elements,i?u=a.eq(e):k.length?(s=a.index(k),-1===s&&0>e&&(s=0),c=x?(s+e+a.length)%a.length:Math.max(0,Math.min(s+e,a.length-1)),u=a.eq(c)):o.length?u=0>e?o.last():o.first():t||(u=0>e?l||p:p||l),!u||!u.length||(k.removeClass("keyboard-selected"),u.addClass("keyboard-selected"),r||t)))){if(h=u.offset().top,g=u.height(),h>=b&&w>h+g)return;if(g>y)return d(h),void 0;f=Math.max(.9,g/y),m=0>e?h+g-f*y:h-(1-f)*y,d(m)}}}function b(e){for(var t,r,i=e+"\n",o=!1,a=$(".keyboard-selected").length,s=0;s<A.order.length;s++)t=A.order[s],r=A.actions[t],h(r)&&(i+=(r.unimportant?"":"!")+(r.indent?"    ":"")+"<kbd>"+t+"</kbd> "+r.name,!a&&r.autoSelect&&(i+="*",o=!0),r.next&&(i+="..."),i+="\n");A.order.length||(i+="(no shortcuts available)"),o&&(i+="*auto-selects if nothing is selected"),n(i)}function y(e){e.each(function(){var e=$(this),t=e.queue("fx");t&&t.length&&e.queue("fx",function(e){setTimeout(E,0),e()})})}function x(){w=null}function S(){w&&!w.isApplicable()&&x()}function C(){A=P,n(""),F.cancel()}function E(){var e=u();return e?(A=e.getShortcuts(),t("disableAutoHelp")||b(e.name),F.cancel(),A.animated&&y(A.animated),void 0):(C(),void 0)}function j(e){return 13===e?"Enter":String.fromCharCode(e).toUpperCase()}function T(e,t){t?window.open(e):location.href=e}function _(e){if(e.ctrlKey||e.altKey||e.metaKey)return D.notHandled;if(StackExchange.helpers.hasContentEditable(e.target))return D.notHandled;if($(e.target).is("textarea, input[type='text'], input[type='url'], input[type='email'], input[type='password'], input[type='search'], input:not([type]), select"))return D.notHandled;var n=A.actions[j(e.which)];if(!n)return D.notHandled;var r=n.reinit?D.handledReinitNow:n.noReset?D.handledNoReset:n.next||n.getNext?D.handled:D.handledResetNow;if(n.autoSelect&&v(1,!0,!0),!h(n))return D.notHandled;n.initiatesMode&&(w=n.initiatesMode);var i=n.url||$(n.link).attr("href");if(i)return T(i,e.shiftKey),r;if(n.click&&n.useDOMClick)return $(n.click).each(function(){this.click()}),r;if(n.click)return $(n.click).click(),r;if(n.clickOrLink){var o=$(n.clickOrLink),a=o.length?$._data(o[0],"events"):null,s=!1;if(a&&a.click&&a.click.length)s=!0;else if(a=$._data(document,"events"),a&&a.click)for(var c=0;c<a.click.length;c++){var u=a.click[c].selector;if(u&&o.is(u)){s=!0;break}}return s?o.click():T(o.attr("href"),e.shiftKey),r}var l;if(l=n.getNext?n.getNext():n.next){var d=n.name+"...";return A=l,t("disableAutoHelp")||b(d),r}return n.func?(n.func(e),r):(StackExchange.debug.log("action found, but nothing to do"),void 0)}var O,P=new r,A=P,I={},M={"questionPage":{"name":"post","selector":".question, .answer","firstText":"select question","nextText":"select next post","prevText":"select prev post"},"questionListing":{"name":"question","selector":"#questions .question-summary:visible, #question-mini-list .question-summary:visible, .user-questions .question-summary, #questions-table .question-summary, .fav-post .question-summary, #bounties-table .question-summary","firstText":"select first question","nextText":"select next question","prevText":"select prev question","gotoText":"go to selected question"},"answerListing":{"name":"answer","selector":"#answers-table .answer-summary .answer-link, .user-answers .answer-summary","firstText":"select first answer","nextText":"select next answer","prevText":"select prev answer","gotoText":"go to selected answer"},"tagListing":{"name":"tag","selector":"#tags-browser .tag-cell","firstText":"select first tag","nextText":"select next tag","prevText":"select prev tag","gotoText":"go to selected tag"},"userListing":{"name":"user","selector":"#user-browser .user-info","firstText":"select first user","nextText":"select next user","prevText":"select prev user","gotoText":"go to selected user"},"badgeListing":{"name":"badge","selector":"body.badges-page tr td:nth-child(2)","firstText":"select first badge","nextText":"select next badge","prevText":"select prev badge","gotoText":"go to selected badge"},"userSiteListing":{"name":"site","selector":"#content .module .account-container","firstText":"select first site","nextText":"select next site","prevText":"select prev site","gotoText":"go to selected site"},"activityListing":{"name":"activity","selector":"table.history-table tr:has(div.date) td:last-child","firstText":"select first activity","nextText":"select next activity","prevText":"select prev activity","gotoText":"go to selected activity"},"reputationListing":{"name":"rep","selector":"table.rep-table > tbody > tr.rep-table-row > td:last-child","firstText":"select first rep","nextText":"select next rep","prevText":"select prev rep","gotoText":"go to selected rep"},"flagListing":{"name":"flag","selector":"table.flagged-posts.moderator > tbody > tr > td div.mod-post-header","hrefOnly":!0,"firstText":"select first flag","nextText":"select next flag","prevText":"select prev flag","gotoText":"go to selected flag"}};if(/^\/questions\/\d+/i.test(location.pathname)?(I.isQuestionPage=!0,O=M.questionPage):/^\/users(\/(edit|preferences|apps|mylogins|hidecommunities|account\-info))?\/(\d)+/i.test(location.pathname)?I.isProfilePage=!0:/^\/tags\/[^\/]+\/info$/i.test(location.pathname)&&(I.isTagInfoPage=!0),$(M.answerListing.selector).length&&(I.isAnswerListing=!0,O=M.answerListing),$(M.questionListing.selector).length)I.isQuestionListing=!0,O=M.questionListing;else for(var L in M)if(M.hasOwnProperty(L)&&!/(?:question|answer)Listing/.test(L)&&$(M[L].selector).length){O=M[L],I["is"+L.charAt(0).toUpperCase()+L.substr(1)]=!0;break}e&&(O=e),O&&(O.elements=$(O.selector)),I.mainSiteLink=StackExchange.options.site.parentUrl,I.metaSiteLink=StackExchange.options.site.childUrl;var F=StackExchange.helpers.DelayedReaction(E,t("disableAutoHelp")?2e3:5e3,{"sliding":!0}),D={"notHandled":0,"handled":1,"handledNoReset":2,"handledResetNow":3,"handledReinitNow":4},q=!1,N=function(){q=!0},B=function(e){27===e.which?(x(),C()):q&&E(),q=!1},U=function(e){q=!1;var t=_(e);switch(t){case D.notHandled:return S(),E(),!0;case D.handled:return F.trigger(),!1;case D.handledResetNow:return E(),!1;case D.handledNoReset:return F.cancel(),!1;case D.handledReinitNow:return g(),!1}},R=function(e){"undefined"!=typeof e.which&&(x(),E())};return $(document).keydown(N),$(document).keyup(B),$(document).keypress(U),$(document).click(R),o(),E(),{"getSelectable":function(){return O},"cancel":function(){$(document).unbind("keydown",N),$(document).unbind("keyup",B),$(document).unbind("keypress",U),$(document).unbind("click",R)},"reset":E}}function d(e){var t=$(window);x.pos=t.scrollTop(),$(x).stop().animate({"pos":e},{"duration":200,"step":function(){t.scrollTop(this.pos)},"complete":function(){t.scrollTop(e)}})}function p(e){var t,n=[],r=!1;for(t=0;t<S.length;t++){var i=S[t];i.re.test(e)?(i.deferred.resolve(),r=!0):n.push(i)}return S=n,r}function f(e){return/users\/stats\/(questions|answers)|posts\/\d+\/ajax-load-mini|posts\/ajax-load-realtime/.test(e)}function h(e){return/mini-profiler-results|users\/login\/global|\.js/.test(e)}function g(){C.cancel(),C=l(C.getSelectable())}var m;if(window.StackExchange&&StackExchange.helpers&&StackExchange.helpers.DelayedReaction){var v=$("body > .js-top-bar"),b=".keyboard-console { background-color: black; background-color: rgba(0, 0, 0, .8); position: fixed; left: 100px; bottom: 100px;padding: 10px; text-align: left; border-radius: 6px; z-index: 1000 }.keyboard-console pre { background-color: transparent; color: #ccc; width: auto; height: auto; padding: 0; margin: 0; overflow: visible; line-height:1.5; border: none;}.keyboard-console pre b, .keyboard-console pre a { color: white !important; }.keyboard-console pre kbd { display: inline-block; font-family: monospace; }.keyboard-selected { box-shadow: 15px 15px 50px rgba(0, 0, 0, .2) inset; }";$("<style type='text/css' />").text(b).appendTo("head"),r.prototype.add=function(e,t,n){this.actions[e]&&StackExchange.debug.log("duplicate shortcut "+e),this.order.push(e),this.actions[e]=n,n.name=$("<span />").text(t).html()};var y={};y.featured="B",y.bugs="G";var w,k={"name":"Popup...","isApplicable":function(){return $(".popup, .js-keyboard-navigable-modal").length},"getShortcuts":function(){var e=$(".popup, .js-keyboard-navigable-modal").last();return e.hasClass("popup")?this.getPopupShortcuts(e):this.getModalShortcuts(e)},"getPopupShortcuts":function(e){var t=e.find(".popup-active-pane"),n=new r,s=1,c=65,u=[],l=$(".popup .subheader [id='tabs']");l.find("> a").length>1&&n.add("T","switch tab",{"next":a(".popup .subheader [id='tabs']")}),t.length||(t=e);var d=t.find(".action-list > li > label > input[type='radio']:visible, .action-list > li > a[href]:visible, .action-list > li > .migration-targets input[type='radio']:visible");return d.length>10&&(c+=d.length-10),d.each(function(){var e=$(this),t=e.closest("li"),r=t.add(t.find("> .migration-targets td:not(.target-icon)")).find("> label .action-name"),a=t.find(".action-subform"),l=o(s);return e.is("a")?(n.add(l,i(e.text()),{"link":e}),s++,void 0):(n.add(l,i(r.text())||"unknown action",{"func":function(){e.focus().click()}}),a.length&&(a.find("input[type='radio']:visible").each(function(){var e=$(this),t=e.parent().find(".action-name");t.length||(t=e.parent()),n.add(String.fromCharCode(c),i(t.text()||"other"),{"func":function(){e.focus().click()},"indent":!0}),c++}),u.push(a)),s++,void 0)}),u.length&&(n.animated=$(u)),n},"getModalShortcuts":function(e){var t=new r,n=e.find(e.attr("data-keyboard-actions")).filter(":visible"),i=0,a=Math.max(10,n.filter(function(){return!$(this).attr("data-shortcut")}).length);return this.addShortcuts(n,t,{},e,function(){return o(++i)},function(){return o(++a)}),t},"addShortcuts":function(e,t,n,r,o,a){var s=this;e.each(function(){var e=$(this);if(e.is(":visible")){var c=e.attr("data-shortcut")||o(),u=e.attr("id"),l=(u?r.find("label[for="+u+"]"):e).closest("label");0===l.length&&(l=e);var d=i(l.find(".js-short-label").text()||l.text());t.add(c,d,$.extend({},n,s.actionFor(e))),e.is(":checked")&&s.addShortcuts(r.find(e.attr("data-keyboard-actions")),t,{"indent":!0},r,a,a)}})},"actionFor":function(e){if(e.is("select")){var t=new r;return e.children().each(function(){var e=$(this);t.add(e.attr("data-shortcut"),e.text(),{"func":function(){e.prop("selected",!0).dispatchEvent("change")}})}),{"next":t}}return e.is("[type=radio]")?{"func":function(){e.focus().click()}}:e.is("[type=checkbox]")?{"func":function(){e.focus().click()}}:e.is("a[href]")?{"link":e}:{}}},x={},S=[],C=l();$(document).ajaxComplete(function(e,t,n){p(n.url)||(f(n.url)?g():h(n.url)||C.reset())}),$(document).on("click",".js-new-post-activity",g)}}var r=!1;return{"init":function(e){r||(r=!0,e&&t(),n())}}}();